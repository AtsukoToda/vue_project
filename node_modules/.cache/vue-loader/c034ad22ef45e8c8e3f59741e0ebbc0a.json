{"remainingRequest":"/Users/atsukotoda/Desktop/curry_pj/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/atsukotoda/Desktop/curry_pj/src/views/Cart.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/atsukotoda/Desktop/curry_pj/src/views/Cart.vue","mtime":1630041841217},{"path":"/Users/atsukotoda/Desktop/curry_pj/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/atsukotoda/Desktop/curry_pj/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/atsukotoda/Desktop/curry_pj/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/atsukotoda/Desktop/curry_pj/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBPcmRlciBmcm9tICdAL2NvbXBvbmVudHMvT3JkZXIudnVlJwppbXBvcnQge21hcEFjdGlvbnN9IGZyb20gJ3Z1ZXgnCmV4cG9ydCBkZWZhdWx0IHsKICAgIGNvbXBvbmVudHM6ewogICAgICAgIE9yZGVyCiAgICB9LAogICAgZGF0YSgpewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGhlYWRlcnM6WwogICAgICAgICAgICAgICAge3RleHQ6JycsdmFsdWU6J2ltZycsc29ydGFibGU6ZmFsc2V9LAogICAgICAgICAgICAgICAge3RleHQ6J+WVhuWTgeWQjScsdmFsdWU6J25hbWUnfSwKICAgICAgICAgICAgICAgIHt0ZXh0OifkvqHmoLwo56iO5oqcKScsdmFsdWU6J3ByaWNlJ30sCiAgICAgICAgICAgICAgICB7dGV4dDon5pWw6YePJyx2YWx1ZTonbnVtYmVyJ30sCiAgICAgICAgICAgICAgICB7dGV4dDon5bCP6KiIJyx2YWx1ZTonc3VtJ30sCiAgICAgICAgICAgICAgICB7dmFsdWU6J2RlbGV0ZScsc29ydGFibGU6ZmFsc2V9LAogICAgICAgICAgICBdLAogICAgICAgICAgICB0YXg6MC4xLAogICAgICAgICAgICBzaG93OnRydWUKICAgICAgICB9CiAgICB9LAogICAgY29tcHV0ZWQ6ewogICAgICAgIGNhcnRJdGVtcygpewogICAgICAgICAgICBpZih0aGlzLiRzdG9yZS5zdGF0ZS5jYXJ0SXRlbXMpewogICAgICAgICAgICAgICAgbGV0IGl0ZW1EYXRhID0gdGhpcy4kc3RvcmUuc3RhdGUuaXRlbURhdGE7CiAgICAgICAgICAgICAgICBsZXQgY2FydEl0ZW1zID0gdGhpcy4kc3RvcmUuc3RhdGUuY2FydEl0ZW1zOwogICAgICAgICAgICAgICAgbGV0IGl0ZW1JbmZvID0gY2FydEl0ZW1zLml0ZW1JbmZvOwogICAgICAgICAgICAgICAgbGV0IGFycmF5ID0gW107CiAgICAgICAgICAgICAgICBpdGVtSW5mby5mb3JFYWNoKChpdGVtSW4pPT57CiAgICAgICAgICAgICAgICAgICAgaXRlbURhdGEuZm9yRWFjaCgoaXRlbUQpPT57CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGl0ZW1Jbi5pdGVtSWQ9PWl0ZW1ELmlkKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1ELml0ZW1OdW0gPSBpdGVtSW4uaXRlbU51bQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbUQuY2FydElkID0gaXRlbUluLmlkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgYSA9IEpTT04uc3RyaW5naWZ5KGl0ZW1EKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IEpTT04ucGFyc2UoYSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5LnB1c2goYSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgcmV0dXJuIGFycmF5CiAgICAgICAgICAgIH1lbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBudWxsCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGNhcnRMZW5ndGgoKXsKICAgICAgICAgICAgaWYodGhpcy4kc3RvcmUuc3RhdGUuY2FydEl0ZW1zKXsKICAgICAgICAgICAgICAgIGxldCBjYXJ0SXRlbXMgPSB0aGlzLiRzdG9yZS5zdGF0ZS5jYXJ0SXRlbXMKICAgICAgICAgICAgICAgIGlmKGNhcnRJdGVtcy5pdGVtSW5mby5sZW5ndGg9PT0wKXsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHByaWNlU3VtKCl7CiAgICAgICAgICAgIGxldCBzdW09MDsKICAgICAgICAgICAgdGhpcy5jYXJ0SXRlbXMuZm9yRWFjaCgoaXRlbSk9PnsKICAgICAgICAgICAgICAgIHN1bSArPSBpdGVtLnByaWNlKml0ZW0uaXRlbU51bTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgcmV0dXJuIHN1bQogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOnsKICAgICAgICBsb2dpbkNoZWNrKCl7CiAgICAgICAgICAgIGlmKHRoaXMuJHN0b3JlLmdldHRlcnMudWlkKXsKICAgICAgICAgICAgICAgIHRoaXMuc2hvdyA9ICF0aGlzLnNob3cKICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2xvZ2luJykKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgLi4ubWFwQWN0aW9ucyhbJ2RlbGV0ZUl0ZW1Gcm9tQ2FydCddKSwKICAgICAgICBkZWxldGVDb25maXJtKGNhcnRJZCl7CiAgICAgICAgICAgIGlmKGNvbmZpcm0oJ+WJiumZpOOBl+OBpuOCguOCiOOCjeOBl+OBhOOBp+OBmeOBi++8nycpKQogICAgICAgICAgICB0aGlzLmRlbGV0ZUl0ZW1Gcm9tQ2FydCh7Y2FydElkOmNhcnRJZH0pCiAgICAgICAgfSwKICAgIH0KfQo="},{"version":3,"sources":["Cart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Cart.vue","sourceRoot":"src/views","sourcesContent":["<template>\n<v-container>\n    <h1 v-if=\"show\" id=\"cart\">ショッピングカート</h1>\n    <h1 v-else>注文内容確認</h1>\n    <div v-if=\"cartLength\">\n        <v-row>\n            <v-col>\n                <v-data-table\n                :headers=\"headers\"\n                :items=\"cartItems\"\n                :items-per-page=\"5\"\n                item-key=\"cartId\"\n                class=\"elevation-1\"\n                disable-sort\n                >\n                    <template v-slot:[`item.price`]=\"{ item }\">\n                        <td>{{item.price.toLocaleString('ja-JP')}}円</td>\n                    </template>\n                    <template v-slot:[`item.number`]=\"{ item }\">\n                        <td>{{item.itemNum}}個</td>\n                    </template>\n                    <template v-slot:[`item.img`]=\"{ item }\">\n                        <img :src=\"item.img\" width=\"100px\" height=\"100px\">\n                    </template>\n                    <template v-slot:[`item.sum`]=\"{ item }\">\n                        <td>{{(item.price*item.itemNum).toLocaleString('ja-JP')}}円</td>\n                    </template>\n                    <template v-slot:[`item.delete`]=\"{ item }\">\n                        <v-btn v-if=\"show\" @click=\"deleteConfirm(item.cartId)\" color=\"error\" rounded><strong>削除</strong></v-btn>\n                    </template>\n                </v-data-table>\n            </v-col>\n        </v-row>\n        <v-row class=\"ma-2\">\n            <v-col align=\"center\">\n                <h2>消費税：{{(priceSum*tax).toLocaleString('ja-JP')}}円</h2>\n                <h2>ご注文金額合計：{{(Math.floor(priceSum+(priceSum*tax)).toLocaleString('ja-JP'))}}円(税込)</h2>\n                <v-btn v-if=\"show\" color=\"orange\" dark @click=\"loginCheck()\" rounded href=\"#orderForm\">注文に進む</v-btn>\n                <v-btn v-if=\"!show\" @click=\"show=!show\" rounded>カートに戻る</v-btn>\n            </v-col>\n        </v-row>\n        <div id=\"orderForm\">\n        <Order v-show=\"!show\"/>\n        </div>\n    </div>\n    <div v-else>\n        <h3>商品はありません</h3>\n    </div>\n</v-container>\n</template>\n<script>\nimport Order from '@/components/Order.vue'\nimport {mapActions} from 'vuex'\nexport default {\n    components:{\n        Order\n    },\n    data(){\n        return {\n            headers:[\n                {text:'',value:'img',sortable:false},\n                {text:'商品名',value:'name'},\n                {text:'価格(税抜)',value:'price'},\n                {text:'数量',value:'number'},\n                {text:'小計',value:'sum'},\n                {value:'delete',sortable:false},\n            ],\n            tax:0.1,\n            show:true\n        }\n    },\n    computed:{\n        cartItems(){\n            if(this.$store.state.cartItems){\n                let itemData = this.$store.state.itemData;\n                let cartItems = this.$store.state.cartItems;\n                let itemInfo = cartItems.itemInfo;\n                let array = [];\n                itemInfo.forEach((itemIn)=>{\n                    itemData.forEach((itemD)=>{\n                        if(itemIn.itemId==itemD.id){\n                            itemD.itemNum = itemIn.itemNum\n                            itemD.cartId = itemIn.id\n                            let a = JSON.stringify(itemD)\n                            a = JSON.parse(a)\n                            array.push(a)\n                        }\n                    })\n                })\n                return array\n            }else {\n                return null\n            }\n        },\n        cartLength(){\n            if(this.$store.state.cartItems){\n                let cartItems = this.$store.state.cartItems\n                if(cartItems.itemInfo.length===0){\n                    return false\n                }else{\n                    return true\n                }\n            }else{\n                return false\n            }\n        },\n        priceSum(){\n            let sum=0;\n            this.cartItems.forEach((item)=>{\n                sum += item.price*item.itemNum;\n            })\n            return sum\n        }\n    },\n    methods:{\n        loginCheck(){\n            if(this.$store.getters.uid){\n                this.show = !this.show\n            }else{\n                this.$router.push('/login')\n            }\n        },\n        ...mapActions(['deleteItemFromCart']),\n        deleteConfirm(cartId){\n            if(confirm('削除してもよろしいですか？'))\n            this.deleteItemFromCart({cartId:cartId})\n        },\n    }\n}\n</script>"]}]}